<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Classroom Scoreboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            -webkit-user-select: none; /* Safari */
            -ms-user-select: none; /* IE 10+ */
            user-select: none; /* Standard */
        }
        .team-container {
            transition: background-color 0.5s ease, color 0.5s ease;
        }
        .score {
            font-weight: 900;
            font-size: 8rem; /* Adjusted for more teams */
            line-height: 1;
            text-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        .control-button {
            transition: transform 0.1s ease, background-color 0.2s ease;
        }
        .control-button:active {
            transform: scale(0.95);
        }
        input[type="file"] {
            display: none;
        }
        .logo-container:hover .logo-overlay {
            opacity: 1;
        }
        .winner-banner {
            animation: fadeInScale 0.5s ease-out forwards;
        }
        @keyframes fadeInScale {
            from {
                opacity: 0;
                transform: scale(0.8) translateY(-20px);
            }
            to {
                opacity: 1;
                transform: scale(1) translateY(0);
            }
        }
        /* Make color input swatch visible */
        input[type="color"] {
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            width: 32px;
            height: 32px;
            background-color: transparent;
            border: none;
            cursor: pointer;
        }
        input[type="color"]::-webkit-color-swatch {
            border-radius: 50%;
            border: 2px solid rgba(255, 255, 255, 0.5);
        }
        input[type="color"]::-moz-color-swatch {
            border-radius: 50%;
            border: 2px solid rgba(255, 255, 255, 0.5);
        }
        /* Style for embedded SVGs in dark mode */
        .dark .mascot-icon-button img {
             filter: invert(1) brightness(0.8);
        }
        .emoji-button {
            font-size: 3rem;
            line-height: 1;
        }
    </style>
</head>
<body class="bg-gray-100 dark:bg-gray-900 text-gray-800 dark:text-gray-200">

    <div id="app" class="min-h-screen flex flex-col items-center justify-center p-4">
        
        <!-- Fullscreen Button -->
        <button id="fullscreen-button" class="control-button fixed top-4 right-4 z-50 bg-white dark:bg-gray-700 text-gray-800 dark:text-white rounded-full w-12 h-12 flex items-center justify-center shadow-lg hover:bg-gray-200 dark:hover:bg-gray-600" title="Toggle Fullscreen">
            <svg id="fullscreen-icon-open" xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
                <path d="M1.5 1a.5.5 0 0 0-.5.5v4a.5.5 0 0 1-1 0v-4A1.5 1.5 0 0 1 1.5 0h4a.5.5 0 0 1 0 1h-4zM10 .5a.5.5 0 0 1 .5-.5h4A1.5 1.5 0 0 1 16 1.5v4a.5.5 0 0 1-1 0v-4a.5.5 0 0 0-.5-.5h-4a.5.5 0 0 1-.5-.5zM.5 10a.5.5 0 0 1 .5.5v4a.5.5 0 0 0 .5.5h4a.5.5 0 0 1 0 1h-4A1.5 1.5 0 0 1 0 14.5v-4a.5.5 0 0 1 .5-.5zm15 0a.5.5 0 0 1 .5.5v4a1.5 1.5 0 0 1-1.5 1.5h-4a.5.5 0 0 1 0-1h4a.5.5 0 0 0 .5-.5v-4a.5.5 0 0 1 .5-.5z"/>
            </svg>
            <svg id="fullscreen-icon-close" xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="hidden" viewBox="0 0 16 16">
                <path d="M5.5 0a.5.5 0 0 1 .5.5v4A.5.5 0 0 1 5 5H1a.5.5 0 0 1 0-1h3.5V.5a.5.5 0 0 1 .5-.5zm-5 5a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-1 0V6.5H.5a.5.5 0 0 1-.5-.5zm10.5 5.5a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 0 1h-3.5v3.5a.5.5 0 0 1-1 0v-4zM11 5.5a.5.5 0 0 1-.5.5H6a.5.5 0 0 1-.5-.5v-4a.5.5 0 0 1 1 0v3.5h3.5a.5.5 0 0 1 .5.5z"/>
            </svg>
        </button>

        <!-- Main Scoreboard -->
        <div id="teams-container" class="flex flex-wrap justify-center items-stretch gap-4 w-full max-w-7xl mb-6">
            <!-- Teams will be dynamically inserted here -->
        </div>

        <!-- Controls -->
        <div class="bg-white dark:bg-gray-800 p-4 rounded-2xl shadow-lg flex flex-wrap items-center justify-center gap-4">
            <div class="flex items-center gap-2">
                <label for="team-count" class="font-semibold">Teams:</label>
                <input type="number" id="team-count" class="w-20 p-2 rounded-lg bg-gray-200 dark:bg-gray-700 text-center" value="2" min="1" max="8">
            </div>
             <div class="flex items-center gap-2">
                <label for="point-increment" class="font-semibold">Points +/-:</label>
                <input type="number" id="point-increment" class="w-20 p-2 rounded-lg bg-gray-200 dark:bg-gray-700 text-center" value="1" min="1">
            </div>
            <div class="flex items-center gap-2">
                <label for="winning-score" class="font-semibold">Winning Score:</label>
                <input type="number" id="winning-score" class="w-20 p-2 rounded-lg bg-gray-200 dark:bg-gray-700 text-center" value="10" min="1">
            </div>
            <button id="update-teams-button" class="control-button bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded-lg">Update</button>
            <button id="reset-button" class="control-button bg-orange-500 hover:bg-orange-600 text-white font-bold py-2 px-4 rounded-lg">Reset Scores</button>
            
        </div>
        
        <!-- Winner Modal -->
        <div id="winner-modal" class="hidden fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4">
            <div class="bg-white dark:bg-gray-800 p-10 rounded-2xl shadow-2xl text-center winner-banner">
                <h2 id="winner-text" class="text-5xl font-black mb-4"></h2>
                <p class="text-xl text-gray-600 dark:text-gray-300 mb-6">Congratulations!</p>
                <button id="new-game-button" class="control-button bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-8 rounded-lg text-lg">New Game</button>
            </div>
        </div>

        <!-- Logo URL Modal -->
        <div id="logo-modal" class="hidden fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4">
            <div class="relative bg-white dark:bg-gray-800 p-8 rounded-2xl shadow-2xl w-full max-w-md">
                <button id="close-logo-modal" class="absolute top-2 right-2 text-gray-400 hover:text-gray-600 dark:hover:text-white" title="Close">
                     <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                </button>
                <h2 class="text-2xl font-bold mb-4 text-center">Update Logo</h2>
                <p class="text-gray-600 dark:text-gray-300 mb-6 text-center">Find a logo online or upload your own.</p>
                <div class="flex flex-col gap-4">
                    <button id="open-emoji-library-button" class="control-button bg-yellow-500 hover:bg-yellow-600 text-white font-bold py-3 px-6 rounded-lg">Choose an Emoji</button>
                    <button id="open-icon-library-button" class="control-button bg-teal-500 hover:bg-teal-600 text-white font-bold py-3 px-6 rounded-lg">Icon Library</button>
                    <button id="search-google-button" class="control-button bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-6 rounded-lg">Search on Google</button>
                    <input type="text" id="logo-url-input" placeholder="Paste image address here" class="w-full p-3 rounded-lg bg-gray-200 dark:bg-gray-700 text-left border border-gray-300 dark:border-gray-600 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
                    <button id="load-url-button" class="control-button bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded-lg">Load from URL</button>
                    <button id="upload-file-button" class="control-button bg-gray-500 hover:bg-gray-600 text-white font-bold py-3 px-6 rounded-lg">Upload from Computer</button>
                </div>
            </div>
        </div>

        <!-- Icon Library Modal -->
        <div id="icon-library-modal" class="hidden fixed inset-0 bg-black/70 flex items-center justify-center z-[60] p-4">
            <div class="relative bg-white dark:bg-gray-800 p-8 rounded-2xl shadow-2xl w-full max-w-4xl h-[90vh]">
                <button id="close-icon-library-modal" class="absolute top-2 right-2 text-gray-400 hover:text-gray-600 dark:hover:text-white" title="Close">
                     <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                </button>
                <h2 class="text-2xl font-bold mb-4 text-center">Select a Mascot</h2>
                <div id="icon-grid" class="grid grid-cols-4 sm:grid-cols-5 md:grid-cols-6 gap-4 overflow-y-auto h-[calc(90vh-100px)] p-2">
                    <!-- Icons will be dynamically inserted here -->
                </div>
            </div>
        </div>
        
        <!-- Emoji Library Modal -->
        <div id="emoji-library-modal" class="hidden fixed inset-0 bg-black/70 flex items-center justify-center z-[60] p-4">
            <div class="relative bg-white dark:bg-gray-800 p-8 rounded-2xl shadow-2xl w-full max-w-4xl h-[90vh]">
                <button id="close-emoji-library-modal" class="absolute top-2 right-2 text-gray-400 hover:text-gray-600 dark:hover:text-white" title="Close">
                     <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                </button>
                <h2 class="text-2xl font-bold mb-4 text-center">Select an Emoji</h2>
                <div id="emoji-grid" class="grid grid-cols-6 sm:grid-cols-8 md:grid-cols-10 gap-2 overflow-y-auto h-[calc(90vh-100px)] p-2">
                    <!-- Emojis will be dynamically inserted here -->
                </div>
            </div>
        </div>

    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const teamsContainer = document.getElementById('teams-container');
            const teamCountInput = document.getElementById('team-count');
            const pointIncrementInput = document.getElementById('point-increment');
            const updateTeamsButton = document.getElementById('update-teams-button');
            const resetButton = document.getElementById('reset-button');
            const winningScoreInput = document.getElementById('winning-score');
            const winnerModal = document.getElementById('winner-modal');
            const winnerText = document.getElementById('winner-text');
            const newGameButton = document.getElementById('new-game-button');
            const fullscreenButton = document.getElementById('fullscreen-button');
            const fullscreenIconOpen = document.getElementById('fullscreen-icon-open');
            const fullscreenIconClose = document.getElementById('fullscreen-icon-close');
            
            const logoModal = document.getElementById('logo-modal');
            const closeLogoModalButton = document.getElementById('close-logo-modal');
            const logoUrlInput = document.getElementById('logo-url-input');
            const loadUrlButton = document.getElementById('load-url-button');
            const uploadFileButton = document.getElementById('upload-file-button');
            const searchGoogleButton = document.getElementById('search-google-button');
            let teamIndexToUpdate = null;

            const iconLibraryModal = document.getElementById('icon-library-modal');
            const closeIconLibraryModalButton = document.getElementById('close-icon-library-modal');
            const openIconLibraryButton = document.getElementById('open-icon-library-button');
            const iconGrid = document.getElementById('icon-grid');
            
            const emojiLibraryModal = document.getElementById('emoji-library-modal');
            const closeEmojiLibraryModalButton = document.getElementById('close-emoji-library-modal');
            const openEmojiLibraryButton = document.getElementById('open-emoji-library-button');
            const emojiGrid = document.getElementById('emoji-grid');

            let teams = [];
            const defaultColors = ['#3B82F6', '#EF4444', '#10B981', '#F59E0B', '#8B5CF6', '#EC4899', '#6366F1', '#D946EF'];

            const mascots = [
                { name: 'Tiger', svg: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M22 8.333V6H2v2.333L3.333 10v1H2v2h1.333v1L2 15.667V18h20v-2.333L20.667 14v-1H22v-2h-1.333v-1L22 8.333zM9 16H7v-2h2v2zm0-4H7v-2h2v2zm0-4H7V6h2v2zm4 8h-2v-2h2v2zm0-4h-2v-2h2v2zm0-4h-2V6h2v2zm4 8h-2v-2h2v2zm0-4h-2v-2h2v2zm0-4h-2V6h2v2z"/></svg>' },
                { name: 'Eagle', svg: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M20.88 3.12A12.04 12.04 0 0012 2C6.87 2 2.65 5.67 2.12 10.64l1.94.39C4.49 6.8 7.82 4 12 4c3.7 0 6.84 2.34 8.08 5.5l1.94-.72A11.97 11.97 0 0020.88 3.12zM12 13c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm0-10c-4.42 0-8 3.58-8 8s3.58 8 8 8 8-3.58 8-8-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.69 6-6 6z"/></svg>' },
                { name: 'Bulldog', svg: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M16 9c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1m-8 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1m4 0c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2M5 14h14v2H5zm14-4H5c-1.1 0-2 .9-2 2v6c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-6c0-1.1-.9-2-2-2zM5 4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2v4H5V4z"/></svg>' },
                { name: 'Panther', svg: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm-9 13H5v-2h6v2zm0-4H5v-2h6v2zm8-2h-2v2h-2v-2h-2v-2h2V9h-2V7h2V5h2v2h2v2h-2v2h2v2z"/></svg>' },
                { name: 'Lion', svg: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-4-4h8v-2H8v2zm0-4h8v-2H8v2zm0-4h8V6H8v2z"/></svg>' },
                { name: 'Bear', svg: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M18 9c0-1.1-.9-2-2-2h-2c-1.1 0-2 .9-2 2v2H8V9c0-1.1-.9-2-2-2H4c-1.1 0-2 .9-2 2v6c0 1.1.9 2 2 2h2c1.1 0 2-.9 2-2v-2h4v2c0 1.1.9 2 2 2h2c1.1 0 2-.9 2-2V9zm-8 4H4v-2h6v2zm8 0h-6v-2h6v2z"/></svg>' },
                { name: 'Knight', svg: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M6.5 10h-2v7h2v-7zm6 0h-2v7h2v-7zm8.5 0h-2v7h2v-7zm-11-4h-2v2h2V6zM12.5 6h-2v2h2V6zm4 0h-2v2h2V6zM21 4H3C2.4 4 2 4.4 2 5v14c0 .6.4 1 1 1h18c.6 0 1-.4 1-1V5c0-.6-.4-1-1-1zM5 18H3v-7h2v7zm6 0H9v-7h2v7zm6 0h-2v-7h2v7zm-1-10H4V6h16v2z"/></svg>' },
                { name: 'Viking', svg: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M4 6h16v2H4zm0 4h16v2H4zm0 4h16v2H4zm17 4H3c-.6 0-1-.4-1-1V5c0-.6.4-1 1-1h18c.6 0 1 .4 1 1v12c0 .6-.4 1-1 1zM7 2v2h10V2H7z"/></svg>' },
                { name: 'Hawk', svg: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2L2 7v10l10 5 10-5V7L12 2zm0 2.24L19.5 8 12 11.76 4.5 8 12 4.24zM4 15.55v-6.1l8 4 8-4v6.1l-8 4-8-4z"/></svg>' },
                { name: 'Pirate', svg: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"/></svg>' },
                { name: 'Hornet', svg: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm4.37 13.37L12 13.41l-4.37 1.96L8.5 9.5 5.63 6.63l4.87.01L12 2l1.5 4.64 4.87-.01-2.87 2.87 1.24 5.86z"/></svg>' },
                { name: 'Falcon', svg: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z M12 5c-3.86 0-7 3.14-7 7s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm0 12c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z"/></svg>' },
                { name: 'Trojan', svg: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 15c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm0-8c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM4 12c0-4.41 3.59-8 8-8s8 3.59 8 8-3.59 8-8 8-8-3.59-8-8z"/></svg>' },
                { name: 'Spartan', svg: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"/></svg>' },
                { name: 'Mustang', svg: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M5 13.18v4L12 21l7-3.82v-4L12 17l-7-3.82zM12 3L1 9l11 6 9-4.91V17h2V9L12 3z"/></svg>' },
                { name: 'Comet', svg: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M15 5.5c0 2.2-1.8 4-4 4s-4-1.8-4-4 1.8-4 4-4 4 1.8 4 4zm-4 7c-3.3 0-6 2.7-6 6h12c0-3.3-2.7-6-6-6zm9.9-7.4L20 6l-.9.1c-2 .2-3.8 1-5.1 2.3-.3.3-.5.7-.6 1.1l-1.4 4.5H16l1.4-4.5c.1-.4.3-.7.6-1.1 1.3-1.3 3.1-2.1 5.1-2.3l.9-.1L20 4z"/></svg>' },
                { name: 'Rocket', svg: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-1-13h2v6h-2zm0 8h2v2h-2z"/></svg>' },
                { name: 'Dragon', svg: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1.94 14.94L12 15l-1.94 1.94-1.06-1.06L10.94 15l-1.94-1.94 1.06-1.06L12 13.88l1.94-1.94 1.06 1.06L13.06 15l1.94 1.94-1.06 1.06zM12 11c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"/></svg>' },
                { name: 'Wolf', svg: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 4.5c1.38 0 2.5 1.12 2.5 2.5S13.38 11.5 12 11.5 9.5 10.38 9.5 9s1.12-2.5 2.5-2.5zM12 18c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg>' },
                { name: 'Ram', svg: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M21 6H3c-1.1 0-2 .9-2 2v8c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm-2 10H5V8h14v8z M6 10h2v4H6zm10 0h2v4h-2zm-5 0h2v4h-2z"/></svg>' },
                { name: 'Patriot', svg: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2l-2.2 6.8h-7.1l5.7 4.2-2.2 6.8 5.8-4.2 5.8 4.2-2.2-6.8 5.7-4.2h-7.1L12 2z"/></svg>' },
                { name: 'Shark', svg: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-5-8h10v2H7v-2z"/></svg>' },
                { name: 'Gator', svg: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M3 3h18v2H3zm0 4h18v2H3zm0 4h18v2H3zm0 4h18v2H3zm0 4h18v2H3z"/></svg>' },
                { name: 'Phoenix', svg: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-1-11h2v2h-2zm0 4h2v6h-2z"/></svg>' },
                { name: 'Jet', svg: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M21 16v-2l-8-5V3.5c0-.83-.67-1.5-1.5-1.5S10 2.67 10 3.5V9l-8 5v2l8-2.5V19l-2 1.5V22l3.5-1 3.5 1v-1.5L13 19v-5.5l8 2.5z"/></svg>' },
                 { name: 'Wildcat', svg: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M22 12c0-5.52-4.48-10-10-10S2 6.48 2 12s4.48 10 10 10 10-4.48 10-10zm-3.5 0c0-1.93-1.57-3.5-3.5-3.5s-3.5 1.57-3.5 3.5 1.57 3.5 3.5 3.5 3.5-1.57 3.5-3.5zm-8 0c0-1.93-1.57-3.5-3.5-3.5S3.5 10.07 3.5 12s1.57 3.5 3.5 3.5 3.5-1.57 3.5-3.5z"/></svg>'},
                { name: 'Cougar', svg: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-2-9c0-.55.45-1 1-1s1 .45 1 1-.45 1-1 1-1-.45-1-1zm4 0c0-.55.45-1 1-1s1 .45 1 1-.45 1-1 1-1-.45-1-1z"/></svg>'},
                { name: 'Cardinal', svg: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zM12 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"/></svg>'},
                { name: 'Giant', svg: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 6c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2zm0 10c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z M12 4C9.79 4 8 5.79 8 8s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4z"/></svg>'},
                { name: 'Warrior', svg: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zM11 7h2v6h-2zm0 8h2v2h-2z"/></svg>'}
            ];

            const emojiList = ['😀', '😎', '😂', '🥳', '🤩', '🚀', '⚡️', '🔥', '⭐️', '🏆', '💯', '🎯', '🏀', '🏈', '⚽️', '⚾️', '🍎', '💡', '📚', '✏️', '👑', '👽', '🤖', '👻', '🐙', '🦋', '🦄', '🦖', '🐳', '✔️'];

            const createTeamHTML = (index, color) => {
                return `
                    <div id="team-${index}-container" class="team-container w-full sm:w-[350px] rounded-2xl shadow-xl flex flex-col p-6 text-white overflow-hidden" style="background-color: ${color};">
                        <div class="grid grid-cols-[32px_1fr_32px] items-center gap-2">
                            <div></div> <!-- Spacer for centering -->
                            <input type="text" id="team-${index}-name" class="w-full text-3xl font-bold bg-transparent border-none text-center focus:ring-2 focus:ring-white/50 rounded-lg p-2" value="Team ${index + 1}">
                            <input type="color" id="team-${index}-color" value="${color}" title="Change team color">
                        </div>
                        <div class="flex-grow flex flex-col items-center justify-center my-4">
                            <div class="relative group logo-container mb-4">
                                <img id="team-${index}-logo" src="https://placehold.co/128x128/${color.substring(1)}/FFFFFF?text=Logo" alt="Team ${index + 1} Logo" class="rounded-full w-32 h-32 object-contain border-4 border-white/50 shadow-md">
                                <div class="logo-overlay absolute inset-0 bg-black/50 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer">
                                    <span class="text-white text-lg font-semibold">Change</span>
                                </div>
                                <input type="file" id="team-${index}-logo-input" accept="image/*">
                            </div>
                            <div id="team-${index}-score" class="score">0</div>
                        </div>
                        <div class="flex items-center justify-center gap-4">
                            <button id="team-${index}-minus" class="control-button bg-white/20 hover:bg-white/30 text-white rounded-full w-14 h-14 flex items-center justify-center text-3xl font-bold">-</button>
                            <button id="team-${index}-plus" class="control-button bg-white/20 hover:bg-white/30 text-white rounded-full w-16 h-16 flex items-center justify-center text-4xl font-bold">+</button>
                        </div>
                    </div>
                `;
            };

            const generateAndSetupTeams = (count) => {
                teamsContainer.innerHTML = '';
                teams = [];
                for (let i = 0; i < count; i++) {
                    const color = defaultColors[i % defaultColors.length];
                    teamsContainer.innerHTML += createTeamHTML(i, color);
                }

                for (let i = 0; i < count; i++) {
                    const team = {
                        container: document.getElementById(`team-${i}-container`),
                        nameInput: document.getElementById(`team-${i}-name`),
                        scoreDisplay: document.getElementById(`team-${i}-score`),
                        plusButton: document.getElementById(`team-${i}-plus`),
                        minusButton: document.getElementById(`team-${i}-minus`),
                        colorInput: document.getElementById(`team-${i}-color`),
                        logoImg: document.getElementById(`team-${i}-logo`),
                        logoInput: document.getElementById(`team-${i}-logo-input`),
                        score: 0
                    };
                    teams.push(team);
                    
                    team.container.querySelector('.logo-overlay').addEventListener('click', () => openLogoModal(i));
                    team.plusButton.addEventListener('click', () => updateScore(i, 1));
                    team.minusButton.addEventListener('click', () => updateScore(i, -1));
                    team.colorInput.addEventListener('input', () => updateColor(i));
                    team.nameInput.addEventListener('input', saveState);
                    team.logoInput.addEventListener('change', () => handleLogoChange(i));
                }
            };

            const updateScore = (teamIndex, direction) => {
                const team = teams[teamIndex];
                const increment = parseInt(pointIncrementInput.value) || 1;
                team.score = Math.max(0, team.score + (increment * direction));
                team.scoreDisplay.textContent = team.score;
                team.scoreDisplay.style.transform = 'scale(1.1)';
                setTimeout(() => { team.scoreDisplay.style.transform = 'scale(1)'; }, 150);
                checkForWinner();
                saveState();
            };

            const updateColor = (teamIndex) => {
                const team = teams[teamIndex];
                team.container.style.backgroundColor = team.colorInput.value;
                saveState();
            };

            const openLogoModal = (index) => {
                teamIndexToUpdate = index;
                logoUrlInput.value = '';
                logoModal.classList.remove('hidden');
            };

            const closeLogoModal = () => {
                logoModal.classList.add('hidden');
            };
            
            const openIconLibrary = () => {
                iconLibraryModal.classList.remove('hidden');
            };

            const closeIconLibrary = () => {
                iconLibraryModal.classList.add('hidden');
            };

            const openEmojiLibrary = () => {
                emojiLibraryModal.classList.remove('hidden');
            };

            const closeEmojiLibrary = () => {
                emojiLibraryModal.classList.add('hidden');
            };


            const handleGoogleSearch = () => {
                if (teamIndexToUpdate !== null) {
                    const teamName = teams[teamIndexToUpdate].nameInput.value;
                    const searchTerm = encodeURIComponent(teamName);
                    const searchUrl = `https://www.google.com/search?q=${searchTerm}&tbm=isch`;
                    window.open(searchUrl, '_blank');
                }
            };

            const handleLogoUrl = () => {
                const url = logoUrlInput.value.trim();
                if (url && teamIndexToUpdate !== null) {
                    const team = teams[teamIndexToUpdate];
                    team.logoImg.src = url;
                    const originalColor = team.colorInput.value.substring(1);
                    team.logoImg.onerror = () => {
                        team.logoImg.src = `https://placehold.co/128x128/${originalColor}/FFFFFF?text=Error`;
                    };
                    saveState();
                    closeLogoModal();
                }
            };

            const handleLogoChange = (teamIndex) => {
                const team = teams[teamIndex];
                const file = team.logoInput.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = (e) => {
                        const imageData = e.target.result;
                        team.logoImg.src = imageData;
                        saveState();
                        closeLogoModal();
                    };
                    reader.readAsDataURL(file);
                }
            };

            const resetScores = (fullReset = false) => {
                teams.forEach(team => {
                    team.score = 0;
                    team.scoreDisplay.textContent = 0;
                });
                if(fullReset) {
                    localStorage.removeItem('scoreboardState');
                    localStorage.clear();
                    location.reload();
                } else {
                    saveState();
                }
            };
            
            const checkForWinner = () => {
                const winningScore = parseInt(winningScoreInput.value);
                if (!winningScore || winningScore <= 0) return;

                const winner = teams.find(team => team.score >= winningScore);
                if (winner) {
                    winnerText.textContent = `${winner.nameInput.value} Wins!`;
                    winnerModal.classList.remove('hidden');
                }
            };

            const startNewGame = () => {
                resetScores();
                winnerModal.classList.add('hidden');
            };

            const saveState = () => {
                const state = {
                    teamCount: teams.length,
                    teamsData: teams.map(team => ({
                        name: team.nameInput.value,
                        score: team.score,
                        color: team.colorInput.value,
                        logoSrc: team.logoImg.src
                    })),
                    winningScore: winningScoreInput.value,
                    pointIncrement: pointIncrementInput.value
                };
                localStorage.setItem('scoreboardState', JSON.stringify(state));
            };

            const loadState = () => {
                const state = JSON.parse(localStorage.getItem('scoreboardState'));
                if (state && state.teamCount > 0) {
                    teamCountInput.value = state.teamCount;
                    pointIncrementInput.value = state.pointIncrement || 1;
                    winningScoreInput.value = state.winningScore || 10;
                    
                    generateAndSetupTeams(state.teamCount);

                    state.teamsData.forEach((data, i) => {
                        if (teams[i]) {
                            teams[i].nameInput.value = data.name;
                            teams[i].score = data.score;
                            teams[i].scoreDisplay.textContent = data.score;
                            teams[i].colorInput.value = data.color;
                            teams[i].container.style.backgroundColor = data.color;
                            if (data.logoSrc) {
                                teams[i].logoImg.src = data.logoSrc;
                            }
                        }
                    });
                } else {
                    generateAndSetupTeams(parseInt(teamCountInput.value));
                }
            };
            
            const toggleFullscreen = () => {
                if (!document.fullscreenElement) {
                    document.documentElement.requestFullscreen().catch((err) => {
                        console.error(`Error attempting to enable full-screen mode: ${err.message} (${err.name})`);
                    });
                } else if (document.exitFullscreen) {
                    document.exitFullscreen();
                }
            };

            // --- Event Listeners ---
            updateTeamsButton.addEventListener('click', () => {
                const newCount = parseInt(teamCountInput.value);
                if (newCount > 0 && newCount <= 8) {
                    generateAndSetupTeams(newCount);
                    saveState();
                }
            });
            resetButton.addEventListener('click', () => resetScores(false));
            newGameButton.addEventListener('click', startNewGame);
            winningScoreInput.addEventListener('input', saveState);
            pointIncrementInput.addEventListener('input', saveState);
            fullscreenButton.addEventListener('click', toggleFullscreen);

            // Logo modal listeners
            closeLogoModalButton.addEventListener('click', closeLogoModal);
            loadUrlButton.addEventListener('click', handleLogoUrl);
            searchGoogleButton.addEventListener('click', handleGoogleSearch);
            uploadFileButton.addEventListener('click', () => {
                if(teamIndexToUpdate !== null) {
                    teams[teamIndexToUpdate].logoInput.click();
                }
            });

            // Icon Library listeners
            openIconLibraryButton.addEventListener('click', openIconLibrary);
            closeIconLibraryModalButton.addEventListener('click', closeIconLibrary);
            
            iconGrid.addEventListener('click', (e) => {
                const button = e.target.closest('.mascot-icon-button');
                if (button) {
                    const url = button.dataset.url;
                    if (url && teamIndexToUpdate !== null) {
                        const team = teams[teamIndexToUpdate];
                        team.logoImg.src = url;
                        team.logoImg.onerror = () => {
                            const originalColor = team.colorInput.value.substring(1);
                            team.logoImg.src = `https://placehold.co/128x128/${originalColor}/FFFFFF?text=Error`;
                        };
                        saveState();
                        closeIconLibrary();
                        closeLogoModal();
                    }
                }
            });

            // Emoji Library Listeners
            openEmojiLibraryButton.addEventListener('click', openEmojiLibrary);
            closeEmojiLibraryModalButton.addEventListener('click', closeEmojiLibrary);
            emojiGrid.addEventListener('click', (e) => {
                const button = e.target.closest('.emoji-button');
                if (button && teamIndexToUpdate !== null) {
                    const emoji = button.textContent.trim();
                    // Create an SVG data URL for the emoji, which is more reliable than canvas
                    const svg = `
                        <svg xmlns="http://www.w3.org/2000/svg" width="128" height="128" viewBox="0 0 128 128">
                            <text x="50%" y="50%" dominant-baseline="central" text-anchor="middle" font-size="100">${emoji}</text>
                        </svg>
                    `;
                    const dataUrl = `data:image/svg+xml;charset=UTF-8,${encodeURIComponent(svg)}`;
                    
                    const team = teams[teamIndexToUpdate];
                    team.logoImg.src = dataUrl;
                    saveState();
                    closeEmojiLibrary();
                    closeLogoModal();
                }
            });


            document.addEventListener('fullscreenchange', () => {
                const isFullscreen = !!document.fullscreenElement;
                fullscreenIconOpen.classList.toggle('hidden', isFullscreen);
                fullscreenIconClose.classList.toggle('hidden', !isFullscreen);
            });

            // --- Initial Load ---
            const populateIconLibrary = () => {
                 iconGrid.innerHTML = ''; 
                 mascots.forEach(mascot => {
                    const svgDataUrl = `data:image/svg+xml;charset=UTF-8,${encodeURIComponent(mascot.svg)}`;
                    const iconHTML = `
                        <button class="mascot-icon-button flex flex-col items-center justify-center p-2 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors" data-url="${svgDataUrl}">
                            <img src="${svgDataUrl}" alt="${mascot.name}" class="w-16 h-16 object-contain pointer-events-none">
                            <span class="mt-2 text-sm font-semibold pointer-events-none">${mascot.name}</span>
                        </button>
                    `;
                    iconGrid.innerHTML += iconHTML;
                });
            };

            const populateEmojiLibrary = () => {
                emojiGrid.innerHTML = '';
                emojiList.forEach(emoji => {
                    const emojiHTML = `
                        <button class="emoji-button flex items-center justify-center p-2 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors">
                            ${emoji}
                        </button>
                    `;
                    emojiGrid.innerHTML += emojiHTML;
                });
            };

            populateIconLibrary();
            populateEmojiLibrary();
            loadState();
        });
    </script>
</body>
</html>




